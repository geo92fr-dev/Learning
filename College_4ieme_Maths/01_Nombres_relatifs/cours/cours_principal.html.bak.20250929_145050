<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nombres Relatifs - Cours Interactif</title>
    
    <!-- CSS moderne -->
    <link rel="stylesheet" href="styles/tokens.css">
    <link rel="stylesheet" href="styles/base.css">
    <link rel="stylesheet" href="styles/components.css">
    
    <style>
    .modern-nav {
        /* fixed, theme-aware banner that matches the app styles */
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        background: var(--bg-card); /* use app card background instead of hard white */
        color: var(--text-primary);
        z-index: 1100;
        display: flex;
        gap: 0.5rem;
        padding: 0.6rem 0.9rem;
        border-bottom: 1px solid var(--border-light);
        flex-wrap: wrap;
        height: var(--nav-height, 64px);
        align-items: center;
    -webkit-backdrop-filter: blur(6px);
    backdrop-filter: blur(6px);
    }

    .modern-nav button {
        padding: 0.55rem 0.9rem;
        border: none;
        background: var(--primary);
        color: var(--on-primary, #fff);
        border-radius: var(--radius-md);
        cursor: pointer;
        transition: var(--transition);
        font-weight: 500;
    }

    .modern-nav button:hover {
        background: var(--primary-dark);
        transform: translateY(-1px);
    }
    .modern-nav button:active,
    .modern-nav button:focus {
        outline: 2px solid var(--accent);
        outline-offset: 2px;
        background: var(--primary-dark);
        color: var(--on-primary, #fff);
    }

    /* ensure active state is visibly distinct even if theme colors are light
       apply a slight darkening and clear focus-visible ring for accessibility */
    .modern-nav button:active {
        filter: brightness(0.85);
        transform: translateY(0);
    }

    .modern-nav button:focus-visible {
        box-shadow: 0 0 0 3px rgba(59,130,246,0.18);
        outline: none;
    }

    .progress-container {
        margin: 1rem 0;
        background: var(--bg-secondary);
        border-radius: var(--radius-md);
        overflow: hidden;
    }

    /* Reserve space so fixed header doesn't cover content */
    body {
        padding-top: var(--nav-height, 64px);
    }

    .progress-bar {
        background: var(--success);
        color: white;
        text-align: center;
        padding: 0.5rem;
        transition: width 0.3s ease;
        font-weight: 500;
        width: 0%;
    }

    .content-section {
        margin: 2rem 0;
        padding: 2rem;
        background: var(--bg-card);
        border-radius: var(--radius-lg);
        border: 1px solid var(--border-light);
        scroll-margin-top: 120px;
    }

    .intro-lead {
        font-size: 1.2rem;
        color: var(--text-muted);
        margin-bottom: 2rem;
    }

    .rules-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 1.5rem;
        margin: 2rem 0;
    }

    .rule-card {
        padding: 1.5rem;
        border-radius: var(--radius-lg);
        border-left: 4px solid;
    }

    .rule-card.primary { border-left-color: var(--primary); background: rgba(103, 199, 255, 0.1); }
    .rule-card.secondary { border-left-color: var(--secondary); background: rgba(168, 85, 247, 0.1); }
    .rule-card.accent { border-left-color: var(--accent); background: rgba(34, 197, 94, 0.1); }

    .rule-number {
        display: inline-block;
        width: 2rem;
        height: 2rem;
        background: var(--primary);
        color: white;
        border-radius: 50%;
        text-align: center;
        line-height: 2rem;
        font-weight: bold;
        margin-right: 0.5rem;
    }

    .quiz-simple, .quiz-card, .quiz-question {
        background: var(--bg-secondary);
        padding: 1.5rem;
        border-radius: var(--radius-md);
        margin: 1rem 0;
        border: 1px solid var(--border-light);
    }

    .quiz-option {
        margin: 0.25rem;
        padding: 0.5rem 1rem;
    border: 2px solid var(--border-medium);
    background: var(--bg-input, #fff);
        border-radius: var(--radius-md);
        cursor: pointer;
        transition: var(--transition);
    }

    .quiz-option:hover {
        border-color: var(--primary);
    }

    .shortcut-btn {
        padding: 0.4rem 0.6rem;
        font-size: 0.9rem;
        background: var(--bg-secondary);
        border: 1px solid var(--border-medium);
        border-radius: var(--radius-sm);
        color: var(--text-primary);
        cursor: pointer;
    }

    .nav-shortcuts {
        margin-left: auto;
        display: flex;
        gap: 0.5rem;
        align-items: center;
    }

    .phase-nav {
        display: flex;
        gap: 0.5rem;
        margin-bottom: 2rem;
        border-bottom: 1px solid var(--border-light);
    }

    .phase-btn {
        padding: 0.75rem 1rem;
        border: none;
        background: transparent;
        color: var(--text-muted);
        border-bottom: 2px solid transparent;
        cursor: pointer;
        transition: var(--transition);
    }

    .phase-btn.active {
        color: var(--primary);
        border-bottom-color: var(--primary);
    }

    .quiz-phase {
        display: none;
    }

    .quiz-phase.active {
        display: block;
    }

    /* Mobile adjustments for the banner and body spacing */
    @media (max-width: 760px) {
        .modern-nav {
            height: 56px;
            padding: 0.5rem 0.75rem;
        }
        body {
            padding-top: 56px; /* ensure content isn't hidden under the fixed nav on mobile */
        }
        .nav-shortcuts {
            width: 100%;
            justify-content: flex-end;
        }
    }

    .method-steps {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 1.5rem;
        margin: 2rem 0;
    }

    .method-step {
        padding: 1.5rem;
        background: var(--bg-secondary);
        border-radius: var(--radius-md);
        border-top: 3px solid var(--accent);
    }

    .step-number {
        display: inline-block;
        width: 2rem;
        height: 2rem;
        background: var(--accent);
        color: white;
        border-radius: 50%;
        text-align: center;
        line-height: 2rem;
        font-weight: bold;
        margin-right: 0.5rem;
    }

    .pitfalls-grid {
        display: grid;
        gap: 1.5rem;
        margin: 2rem 0;
    }

    .pitfall-card {
        padding: 1.5rem;
        border-radius: var(--radius-md);
        border-left: 4px solid var(--danger);
        background: rgba(239, 68, 68, 0.1);
    }

    .quiz-feedback {
        margin-top: 1rem;
        padding: 0.75rem;
        border-radius: var(--radius-sm);
        font-weight: 500;
    }

    input[type="text"] {
        width: 100%;
        padding: 0.75rem;
        border: 2px solid var(--border-medium);
        border-radius: var(--radius-md);
        font-size: 1rem;
        margin: 0.5rem 0;
    }

    input[type="text"]:focus {
        outline: none;
        border-color: var(--primary);
    }

    button {
        padding: 0.75rem 1rem;
        background: var(--primary);
        color: white;
        border: none;
        border-radius: var(--radius-md);
        cursor: pointer;
        transition: var(--transition);
        font-weight: 500;
        margin: 0.25rem;
    }

    button:hover:not(:disabled) {
        background: var(--primary-dark);
        transform: translateY(-1px);
    }

    button:disabled {
        opacity: 0.6;
        cursor: not-allowed;
        transform: none;
    }
    </style>
</head>
<body>
<div class="container">
    <header>
        <h1>üî¢ Nombres Relatifs - Cours Interactif</h1>
        
        <!-- Navigation sticky (comme l'original) -->
        <nav class="modern-nav">
            <button onclick="showSection('introduction')">üè† Introduction</button>
            <button onclick="showSection('retention')">üéØ R√®gles</button>
            <button onclick="showSection('phases')">üìö Quiz</button>
            <button onclick="showSection('methodes')">üí° M√©thodes</button>
            <button onclick="showSection('pieges')">‚ö†Ô∏è Pi√®ges</button>
            <!-- Shortcuts quick access -->
            <div class="nav-shortcuts">
                <button class="shortcut-btn" onclick="showSection('exercices-n1')" title="Exercice Niveau 1 (touche 1)">Exo N1</button>
                <button class="shortcut-btn" onclick="showSection('exercices-n2')" title="Exercice Niveau 2 (touche 2)">Exo N2</button>
                <button class="shortcut-btn" onclick="showSection('exercices-n3')" title="Exercice Niveau 3 (touche 3)">Exo N3</button>
                <button class="shortcut-btn" onclick="showSection('fiche-synthese')" title="Synth√®se (touche 4 ou S)">Synth√®se</button>
            </div>
        </nav>
        
        <!-- Barre de progression -->
        <div class="progress-container">
            <div class="progress-bar">0% - Commencez !</div>
        </div>
    </header>

    <!-- Section Introduction (TOUJOURS VISIBLE comme l'original) -->
    <section id="introduction" data-section="introduction" class="content-section">
        <h2>üè† Introduction aux Nombres Relatifs</h2>
        <p class="intro-lead">D√©couvrons les nombres positifs et n√©gatifs √† travers des situations concr√®tes.</p>
        
        <div class="card highlight">
            <h3>üéØ Objectifs du cours</h3>
            <ul>
                <li>Comprendre la notion de nombres relatifs</li>
                <li>Ma√Ætriser l'addition des nombres relatifs</li>
                <li>Appliquer les r√®gles dans des situations concr√®tes</li>
            </ul>
        </div>

        <div class="grid">
            <div class="card">
                <h4>üìä Situations concr√®tes</h4>
                <p>Les nombres relatifs nous entourent :</p>
                <ul>
                    <li><strong>Temp√©rature :</strong> +15¬∞C ou -5¬∞C</li>
                    <li><strong>Argent :</strong> +50‚Ç¨ (gain) ou -30‚Ç¨ (dette)</li>
                    <li><strong>Altitude :</strong> +200m ou -50m (sous la mer)</li>
                </ul>
            </div>
            
            <div class="card">
                <h4>üìè La droite gradu√©e</h4>
                <p>Visualisation sur une droite :</p>
                <div class="number-line">
                    <span>-5</span> <span>-3</span> <span>-1</span> <span>0</span> <span>+1</span> <span>+3</span> <span>+5</span>
                </div>
                <p><strong>R√®gle :</strong> Plus on va √† droite, plus les nombres sont grands</p>
            </div>
        </div>

        <!-- Quiz introduction simple -->
        <div class="quiz-simple">
            <h4>üß† Quiz rapide</h4>
            <p><strong>Quel nombre est le plus grand ?</strong></p>
            <button class="quiz-option" onclick="checkAnswer(this, false)">-8</button>
            <button class="quiz-option" onclick="checkAnswer(this, true)">-2</button>
            <button class="quiz-option" onclick="checkAnswer(this, false)">-10</button>
            <div class="quiz-feedback" id="intro-feedback"></div>
        </div>
    </section>

    <!-- Section R√®gles (TOUJOURS VISIBLE) -->
    <section id="retention" data-section="retention" class="content-section">
        <h2>üéØ Les R√®gles Essentielles</h2>
        <p class="intro-lead">M√©morisez ces 3 r√®gles pour r√©ussir tous les calculs !</p>

        <div class="rules-grid">
            <div class="rule-card primary">
                <div class="rule-header">
                    <span class="rule-number">1</span>
                    <h3>M√™me signe ‚Üí Addition</h3>
                </div>
                <p class="rule-text">J'additionne les valeurs absolues et je garde le signe commun.</p>
                <div class="rule-example">
                    <strong>Exemple :</strong> (+3) + (+5) = +8<br>
                    <strong>Exemple :</strong> (-4) + (-6) = -10
                </div>
                <div class="memory-tip">üí° <em>M√©mo : "M√™me signe = j'empile"</em></div>
            </div>

            <div class="rule-card secondary">
                <div class="rule-header">
                    <span class="rule-number">2</span>
                    <h3>Signes diff√©rents ‚Üí Soustraction</h3>
                </div>
                <p class="rule-text">Je soustrais les valeurs absolues, signe = celui de la plus grande valeur absolue.</p>
                <div class="rule-example">
                    <strong>Exemple :</strong> (+7) + (-3) = +4<br>
                    <strong>Exemple :</strong> (+2) + (-8) = -6
                </div>
                <div class="memory-tip">üí° <em>M√©mo : "Le plus fort gagne"</em></div>
            </div>

            <div class="rule-card accent">
                <div class="rule-header">
                    <span class="rule-number">3</span>
                    <h3>Contr√¥le final</h3>
                </div>
                <p class="rule-text">Je teste mon r√©sultat avec un contexte r√©el (temp√©rature, argent, altitude).</p>
                <div class="rule-example">
                    <strong>Test :</strong> (+5) + (-12) = -7<br>
                    <em>‚Üí "J'ai 5‚Ç¨, je d√©pense 12‚Ç¨ ‚Üí je dois 7‚Ç¨" ‚úì</em>
                </div>
                <div class="memory-tip">üí° <em>M√©mo : "Je valide le sens"</em></div>
            </div>
        </div>

        <!-- Quiz r√©tention -->
        <div class="retention-quiz">
            <h3>üß† Testez votre m√©morisation</h3>
            
            <div class="quiz-card">
                <p><strong>Signes identiques ‚Üí Que faut-il faire ?</strong></p>
                <input type="text" id="retention1" placeholder="Votre r√©ponse" aria-label="R√©ponse - retention r√®gle 1">
                <button onclick="checkRetention('retention1', 'additionne')">‚úì Valider</button>
                <div class="quiz-feedback" id="retention1-feedback"></div>
            </div>

            <div class="quiz-card">
                <p><strong>Signes diff√©rents ‚Üí Que faut-il faire ?</strong></p>
                <input type="text" id="retention2" placeholder="Votre r√©ponse" aria-label="R√©ponse - retention r√®gle 2">
                <button onclick="checkRetention('retention2', 'soustrais')">‚úì Valider</button>
                <div class="quiz-feedback" id="retention2-feedback"></div>
            </div>
        </div>
    </section>

    <!-- Section Quiz (TOUJOURS VISIBLE) -->
    <section id="phases" data-section="phases" class="content-section">
        <h2>üìö Quiz Progressifs</h2>
        <p class="intro-lead">Entra√Ænez-vous √©tape par √©tape avec des exercices adapt√©s !</p>

        <!-- S√©lecteur de phases -->
        <div class="phase-nav">
            <button class="phase-btn active" onclick="showPhase(1)">Phase 1 - D√©butant</button>
            <button class="phase-btn" onclick="showPhase(2)">Phase 2 - Interm√©diaire</button>
            <button class="phase-btn" onclick="showPhase(3)">Phase 3 - Avanc√©</button>
        </div>

        <!-- Phase 1 -->
        <div id="phase-1" class="quiz-phase active">
            <h3>üü¢ Phase 1 : Premiers pas</h3>
            <p>Calculs avec des nombres simples.</p>
            
            <div class="quiz-question">
                <h4>Question 1</h4>
                <p>Calculez : (+7) + (-5) = ?</p>
                <input type="text" id="phase1-q1" aria-label="R√©ponse phase 1 question 1">
                <button onclick="checkPhaseAnswer('phase1-q1', '+2', 'Signes diff√©rents : 7-5=2, signe de +7 ‚Üí +2')">‚úì Valider</button>
                <div class="quiz-feedback" id="phase1-q1-feedback"></div>
            </div>

            <div class="quiz-question">
                <h4>Question 2</h4>
                <p>Calculez : (-8) + (+5) = ?</p>
                <input type="text" id="phase1-q2" aria-label="R√©ponse phase 1 question 2">
                <button onclick="checkPhaseAnswer('phase1-q2', '-3', 'Signes diff√©rents : 8-5=3, signe de -8 ‚Üí -3')">‚úì Valider</button>
                <div class="quiz-feedback" id="phase1-q2-feedback"></div>
            </div>

            <div class="quiz-question">
                <h4>Question 3</h4>
                <p>Calculez : (+4) + (+5) = ?</p>
                <input type="text" id="phase1-q3" aria-label="R√©ponse phase 1 question 3">
                <button onclick="checkPhaseAnswer('phase1-q3', '+9', 'M√™me signe positif : 4+5=9 ‚Üí +9')">‚úì Valider</button>
                <div class="quiz-feedback" id="phase1-q3-feedback"></div>
            </div>
        </div>

        <!-- Phase 2 -->
        <div id="phase-2" class="quiz-phase">
            <h3>üü° Phase 2 : Pratique autonome</h3>
            <p>Ma√Ætrisez diff√©rents types de calculs.</p>
            
            <div class="quiz-question">
                <h4>Question 1</h4>
                <p>Calculez : (-9) + (+4) = ?</p>
                <input type="text" id="phase2-q1" aria-label="R√©ponse phase 2 question 1">
                <button onclick="checkPhaseAnswer('phase2-q1', '-5', 'Signes diff√©rents : 9-4=5, signe de -9 ‚Üí -5')">‚úì Valider</button>
                <div class="quiz-feedback" id="phase2-q1-feedback"></div>
            </div>

            <div class="quiz-question">
                <h4>Question 2</h4>
                <p>Calculez : (+15) + (-4) = ?</p>
                <input type="text" id="phase2-q2" aria-label="R√©ponse phase 2 question 2">
                <button onclick="checkPhaseAnswer('phase2-q2', '+11', 'Signes diff√©rents : 15-4=11, signe de +15 ‚Üí +11')">‚úì Valider</button>
                <div class="quiz-feedback" id="phase2-q2-feedback"></div>
            </div>

            <div class="quiz-question">
                <h4>Question 3</h4>
                <p>Calculez : (-7) + (-5) = ?</p>
                <input type="text" id="phase2-q3" aria-label="R√©ponse phase 2 question 3">
                <button onclick="checkPhaseAnswer('phase2-q3', '-12', 'M√™me signe n√©gatif : 7+5=12 ‚Üí -12')">‚úì Valider</button>
                <div class="quiz-feedback" id="phase2-q3-feedback"></div>
            </div>
        </div>

        <!-- Phase 3 -->
        <div id="phase-3" class="quiz-phase">
            <h3>üî¥ Phase 3 : Ma√Ætrise</h3>
            <p>Situations avanc√©es et cas sp√©ciaux.</p>
            
            <div class="quiz-question">
                <h4>Question 1</h4>
                <p>Calculez : (+10) + (-4) = ?</p>
                <input type="text" id="phase3-q1" aria-label="R√©ponse phase 3 question 1">
                <button onclick="checkPhaseAnswer('phase3-q1', '+6', 'Signes diff√©rents : 10-4=6, signe de +10 ‚Üí +6')">‚úì Valider</button>
                <div class="quiz-feedback" id="phase3-q1-feedback"></div>
            </div>

            <div class="quiz-question">
                <h4>Question 2</h4>
                <p>Calculez : (-3) + (-5) = ?</p>
                <input type="text" id="phase3-q2" aria-label="R√©ponse phase 3 question 2">
                <button onclick="checkPhaseAnswer('phase3-q2', '-8', 'M√™me signe n√©gatif : 3+5=8 ‚Üí -8')">‚úì Valider</button>
                <div class="quiz-feedback" id="phase3-q2-feedback"></div>
            </div>

            <div class="quiz-question">
                <h4>Question 3 - Cas sp√©cial</h4>
                <p>Calculez : (+7) + (-7) = ?</p>
                <input type="text" id="phase3-q3" aria-label="R√©ponse phase 3 question 3">
                <button onclick="checkPhaseAnswer('phase3-q3', '0', 'Nombres oppos√©s : ils s\'annulent ‚Üí 0')">‚úì Valider</button>
                <div class="quiz-feedback" id="phase3-q3-feedback"></div>
            </div>
        </div>
    </section>

    <!-- Section M√©thodes (TOUJOURS VISIBLE) -->
    <section id="methodes" data-section="methodes" class="content-section">
        <h2>üí° M√©thode Illustr√©e</h2>
        <p class="intro-lead">3 √©tapes simples pour ne jamais se tromper !</p>

        <div class="method-steps">
            <div class="method-step">
                <div class="step-header">
                    <span class="step-number">1</span>
                    <h3>Identifier les signes</h3>
                </div>
                <p>Je regarde si les signes sont identiques ou diff√©rents.</p>
                <div class="step-example">
                    <strong>Exemple :</strong> (+5) + (-3)<br>
                    <em>‚Üí Signes diff√©rents : + et -</em>
                </div>
            </div>

            <div class="method-step">
                <div class="step-header">
                    <span class="step-number">2</span>
                    <h3>Appliquer la r√®gle</h3>
                </div>
                <p><strong>M√™me signe :</strong> j'additionne<br>
                   <strong>Signes diff√©rents :</strong> je soustrais</p>
                <div class="step-example">
                    <strong>Suite :</strong> 5 - 3 = 2<br>
                    <em>‚Üí Je garde le signe de 5 (le plus grand) : +2</em>
                </div>
            </div>

            <div class="method-step">
                <div class="step-header">
                    <span class="step-number">3</span>
                    <h3>V√©rifier le r√©sultat</h3>
                </div>
                <p>Je teste avec une situation concr√®te.</p>
                <div class="step-example">
                    <strong>Test :</strong> "J'ai 5‚Ç¨, je d√©pense 3‚Ç¨ ‚Üí il me reste 2‚Ç¨" ‚úì<br>
                    <em>‚Üí Le r√©sultat +2 est logique !</em>
                </div>
            </div>
        </div>

        <!-- Quiz m√©thode -->
        <div class="method-quiz">
            <h3>üéØ Exercice guid√© : (-8) + (+3)</h3>
            
            <div class="guided-question">
                <p><strong>√âtape 1 :</strong> Les signes sont-ils identiques ?</p>
                <button onclick="checkMethodStep(1, false, 'Non, ils sont diff√©rents : - et +')">Oui</button>
                <button onclick="checkMethodStep(1, true, 'Correct ! Les signes sont diff√©rents')">Non, ils sont diff√©rents</button>
                <div class="quiz-feedback" id="method-step1-feedback"></div>
            </div>
        </div>
    </section>

    <!-- Section Pi√®ges (TOUJOURS VISIBLE) -->
    <section id="pieges" data-section="pieges" class="content-section">
        <h2>‚ö†Ô∏è Pi√®ges √† √âviter</h2>
        <p class="intro-lead">Identifiez les erreurs les plus courantes pour ne plus les refaire !</p>

        <div class="pitfalls-grid">
            <div class="pitfall-card error">
                <h3>‚ùå Erreur n¬∞1 : Retirer m√©caniquement</h3>
                <div class="wrong-example">
                    <strong>‚ùå Faux :</strong> (+3) + (-7) = +4<br>
                    <em>Erreur : "J'enl√®ve juste le signe du plus grand"</em>
                </div>
                <div class="correct-example">
                    <strong>‚úÖ Correct :</strong> 7 - 3 = 4, signe de -7 ‚Üí <strong>-4</strong><br>
                    <em>R√©flexe : "Le plus fort en valeur absolue gagne"</em>
                </div>
            </div>

            <div class="pitfall-card warning">
                <h3>‚ö†Ô∏è Pi√®ge n¬∞2 : Confondre addition/soustraction</h3>
                <div class="wrong-example">
                    <strong>‚ùå Faux :</strong> (-5) + (-3) = -2<br>
                    <em>Erreur : "Je soustrais au lieu d'additionner"</em>
                </div>
                <div class="correct-example">
                    <strong>‚úÖ Correct :</strong> M√™me signe ‚Üí 5 + 3 = 8 ‚Üí <strong>-8</strong><br>
                    <em>R√©flexe : "M√™me signe = j'empile"</em>
                </div>
            </div>
        </div>

        <!-- Quiz anti-pi√®ges -->
        <div class="trap-quiz">
            <h3>üß† Quiz Anti-Pi√®ges</h3>
            <div class="quiz-question">
                <p>Un √©l√®ve √©crit : (-6) + (-4) = -2</p>
                <p><strong>Quelle est son erreur ?</strong></p>
                <button onclick="checkTrap(true, 'Correct ! Il a soustrait au lieu d\'additionner (m√™me signe)')">Il a soustrait au lieu d'additionner</button>
                <button onclick="checkTrap(false, 'Non, l\'erreur est qu\'il a soustrait au lieu d\'additionner')">Il a mal calcul√© le signe</button>
                <div class="quiz-feedback" id="trap-feedback"></div>
            </div>
        </div>
    </section>
</div>

<!-- ==========================
     Exercices int√©gr√©s (Niveau 1,2,3)
     ========================== -->

<section id="exercices-n1" data-section="exercices-n1" class="content-section">
    <h2>‚úèÔ∏è Exercices - Niveau 1 (D√©couverte)</h2>
    <p>Exercices guid√©s pour s'entra√Æner sur les notions de base.</p>
    <div class="grid-auto">
        <div class="card">
            <h3>Exercice 1 ‚Äì + et - basiques</h3>
            <p>Calculer : (+5) + (-3)</p>
            <button class="toggle" onclick="toggleSolution('sol_01_Nombres_relatifs_1_1')">Afficher / Masquer solution</button>
            <div id="sol_01_Nombres_relatifs_1_1" class="solution"><p><strong>Indice :</strong> Signes diff√©rents ‚Üí soustraction des valeurs absolues.</p><p><strong>Solution :</strong> 5 - 3 = 2, signe de +5 ‚Üí +2</p></div>
        </div>
        <div class="card">
            <h3>Exercice 2 ‚Äì Temp√©ratures</h3>
            <p>Matin : -2¬∞C, apr√®s-midi : +4¬∞C. Variation ?</p>
            <button class="toggle" onclick="toggleSolution('sol_01_Nombres_relatifs_1_2')">Afficher / Masquer solution</button>
            <div id="sol_01_Nombres_relatifs_1_2" class="solution"><p><strong>Indice :</strong> Variation = temp√©rature finale - temp√©rature initiale.</p><p><strong>Solution :</strong> (+4) - (-2) = (+4) + (+2) = +6¬∞C</p></div>
        </div>
        <div class="card">
            <h3>Exercice 3 ‚Äì Argent</h3>
            <p>Lucas a -15‚Ç¨ sur son compte. Il re√ßoit 8‚Ç¨. Quel est son nouveau solde ?</p>
            <button class="toggle" onclick="toggleSolution('sol_01_Nombres_relatifs_1_3')">Afficher / Masquer solution</button>
            <div id="sol_01_Nombres_relatifs_1_3" class="solution"><p><strong>Indice :</strong> Recevoir de l'argent = addition positive.</p><p><strong>Solution :</strong> (-15) + (+8) = -(15-8) = -7‚Ç¨</p></div>
        </div>
        <!-- autres exercices N1... -->
    </div>
</section>

<section id="exercices-n2" data-section="exercices-n2" class="content-section">
    <h2>‚úèÔ∏è Exercices - Niveau 2 (Pratique)</h2>
    <p>Exercices d'application pour automatiser les r√®gles.</p>
    <div class="grid-auto">
        <div class="card">
            <h3>Exercice 1 ‚Äì Somme multiple</h3>
            <p>(-7) + (+12) + (-5)</p>
            <button class="toggle" onclick="toggleSolution('sol_01_Nombres_relatifs_2_1')">Afficher / Masquer solution</button>
            <div id="sol_01_Nombres_relatifs_2_1" class="solution"><p><strong>M√©thode :</strong> Regrouper par signes : (+12) et (-7-5).</p><p><strong>Solution :</strong> (+12) + (-12) = 0</p></div>
        </div>
        <div class="card">
            <h3>Exercice 2 ‚Äì Soustraction</h3>
            <p>(-15) - (-9)</p>
            <button class="toggle" onclick="toggleSolution('sol_01_Nombres_relatifs_2_2')">Afficher / Masquer solution</button>
            <div id="sol_01_Nombres_relatifs_2_2" class="solution"><p><strong>M√©thode :</strong> Transformer : -(-9) = +9.</p><p><strong>Solution :</strong> (-15) + (+9) = -(15-9) = -6</p></div>
        </div>
        <!-- autres exercices N2... -->
    </div>
</section>

<section id="exercices-n3" data-section="exercices-n3" class="content-section">
    <h2>‚úèÔ∏è Exercices - Niveau 3 (D√©fi)</h2>
    <p>Exercices avanc√©s pour approfondir et transf√©rer.</p>
    <div class="grid-auto">
        <div class="card">
            <h3>Exercice 1 ‚Äì Expression complexe</h3>
            <p>Simplifier : (-4) + (+9) - (+3) - (-2)</p>
            <button class="toggle" onclick="toggleSolution('sol_01_Nombres_relatifs_3_1')">Afficher / Masquer solution</button>
            <div id="sol_01_Nombres_relatifs_3_1" class="solution"><p><strong>√âtapes :</strong> (-4) + (+9) + (-3) + (+2) = (-7) + (+11) = +4</p><p><strong>Solution :</strong> +4</p></div>
        </div>
        <!-- autres exercices N3... -->
    </div>
</section>

<!-- ==========================
     Fiche synth√®se int√©gr√©e
     ========================== -->
<section id="fiche-synthese" data-section="fiche-synthese" class="content-section">
    <h2>üìã Fiche Synth√®se</h2>
    <div class="card">
        <h3>R√®gles essentielles</h3>
        <div class="regle-box regle-positive">
            <h4>R√àGLE 1 : M√™me signe</h4>
            <p>Additionner les valeurs et garder le signe commun.</p>
        </div>
        <div class="regle-box regle-negative">
            <h4>R√àGLE 2 : Signes diff√©rents</h4>
            <p>Soustraire la plus petite de la plus grande, garder le signe du plus fort.</p>
        </div>
        <div class="regle-box regle-neutre">
            <h4>R√àGLE 3 : Contr√¥le</h4>
            <p>V√©rifier le r√©sultat dans un contexte concret (temp√©rature, argent, d√©placement).</p>
        </div>
    </div>
</section>

<!-- JavaScript simple et efficace -->
<script>
// Helper to toggle solution blocks (used by integrated exercise cards)
function toggleSolution(id){
    const el = document.getElementById(id);
    if (!el) return;
    if (el.style.display === 'none' || el.style.display === '') {
        el.style.display = 'block';
    } else {
        el.style.display = 'none';
    }
}

// Navigation par scroll (comme l'original)
function showSection(sectionId) {
    console.log('Navigation vers:', sectionId);
    const section = document.getElementById(sectionId);
    if (section) {
        section.scrollIntoView({ behavior: 'smooth', block: 'start' });
        updateProgress(sectionId);
    }
}

// Navigation entre phases de quiz
function showPhase(phaseNum) {
    console.log('Navigation vers phase:', phaseNum);
    
    // Mettre √† jour les boutons
    const phaseBtns = document.querySelectorAll('.phase-btn');
    phaseBtns.forEach(btn => btn.classList.remove('active'));
    document.querySelector(`.phase-btn:nth-child(${phaseNum})`).classList.add('active');
    
    // Masquer toutes les phases
    const phases = document.querySelectorAll('.quiz-phase');
    phases.forEach(phase => phase.classList.remove('active'));
    
    // Afficher la phase cibl√©e
    const targetPhase = document.getElementById(`phase-${phaseNum}`);
    if (targetPhase) {
        targetPhase.classList.add('active');
    }
}

// Fonction g√©n√©rique de v√©rification de r√©ponse
function normalizeAnswer(answer) {
    return answer.toLowerCase().trim().replace(/\s+/g, '');
}

function checkPhaseAnswer(inputId, correctAnswer, explanation) {
    const input = document.getElementById(inputId);
    const feedback = document.getElementById(inputId + '-feedback');
    
    if (!input || !feedback) return;
    
    const userAnswer = normalizeAnswer(input.value);
    const correct = normalizeAnswer(correctAnswer);
    
    if (userAnswer === correct || userAnswer === correct.replace('+', '')) {
        feedback.textContent = '‚úÖ Correct ! ' + explanation;
        feedback.style.color = '#10b981';
        input.disabled = true;
        input.nextElementSibling.disabled = true;
    } else {
        feedback.textContent = '‚ùå Essayez encore. Pensez aux r√®gles !';
        feedback.style.color = '#ef4444';
    }
}

function checkAnswer(button, isCorrect) {
    const feedback = document.getElementById('intro-feedback');
    const buttons = document.querySelectorAll('.quiz-option');
    
    buttons.forEach(btn => btn.disabled = true);
    
    if (isCorrect) {
        button.style.backgroundColor = '#10b981';
        feedback.textContent = '‚úÖ Correct ! -2 est plus grand que -8 et -10 sur la droite gradu√©e.';
        feedback.style.color = '#10b981';
    } else {
        button.style.backgroundColor = '#ef4444';
        feedback.textContent = '‚ùå Non, regardez la droite gradu√©e : plus on va √† droite, plus c\'est grand.';
        feedback.style.color = '#ef4444';
    }
}

function checkRetention(inputId, expectedWord) {
    const input = document.getElementById(inputId);
    const feedback = document.getElementById(inputId + '-feedback');
    
    const userAnswer = normalizeAnswer(input.value);
    
    if (userAnswer.includes(expectedWord)) {
        feedback.textContent = '‚úÖ Parfait ! Vous ma√Ætrisez la r√®gle.';
        feedback.style.color = '#10b981';
        input.disabled = true;
        input.nextElementSibling.disabled = true;
    } else {
        feedback.textContent = '‚ùå Relisez la r√®gle correspondante ci-dessus.';
        feedback.style.color = '#ef4444';
    }
}

function checkMethodStep(step, isCorrect, message) {
    const feedback = document.getElementById(`method-step${step}-feedback`);
    const buttons = document.querySelectorAll('.guided-question button');
    
    buttons.forEach(btn => btn.disabled = true);
    
    if (isCorrect) {
        feedback.textContent = '‚úÖ ' + message;
        feedback.style.color = '#10b981';
    } else {
        feedback.textContent = '‚ùå ' + message;
        feedback.style.color = '#ef4444';
    }
}

function checkTrap(isCorrect, message) {
    const feedback = document.getElementById('trap-feedback');
    const buttons = document.querySelectorAll('.trap-quiz button');
    
    buttons.forEach(btn => btn.disabled = true);
    
    if (isCorrect) {
        feedback.textContent = '‚úÖ ' + message;
        feedback.style.color = '#10b981';
    } else {
        feedback.textContent = '‚ùå ' + message;
        feedback.style.color = '#ef4444';
    }
}

function updateProgress(sectionId) {
    const progressBar = document.querySelector('.progress-bar');
    const sections = ['introduction', 'retention', 'phases', 'methodes', 'pieges'];
    const currentIndex = sections.indexOf(sectionId);
    
    if (currentIndex >= 0) {
        const progress = ((currentIndex + 1) / sections.length) * 100;
        progressBar.style.width = progress + '%';
        progressBar.textContent = Math.round(progress) + '% - Section ' + (currentIndex + 1) + '/5';
    }
}

// Initialisation
document.addEventListener('DOMContentLoaded', function() {
    console.log('‚úÖ Application initialis√©e - Toutes les sections visibles');
    // Make all sections visible (the base CSS hides [data-section] by default)
    // This preserves the original behavior where all sections are present and
    // navigation simply scrolls to the chosen section.
    document.querySelectorAll('[data-section]').forEach(function(s) {
        s.classList.add('active');
    });

    // Initialize progress to the introduction section
    updateProgress('introduction');
    
    // Navigation au clavier
    document.addEventListener('keydown', function(e) {
        if (e.key === 'ArrowLeft') showPreviousSection();
        if (e.key === 'ArrowRight') showNextSection();
        if (e.key === 'Escape') showSection('introduction');
        // Shortcuts: 1/2/3/4/S navigate in-page to exercise levels and synthesis
        if (e.key === '1') { showSection('exercices-n1'); }
        if (e.key === '2') { showSection('exercices-n2'); }
        if (e.key === '3') { showSection('exercices-n3'); }
        if (e.key === '4' || e.key.toLowerCase() === 's') { showSection('fiche-synthese'); }
    });
});

// Shortcut helpers

function goToExercise(level) {
    showSection('phases');
    showPhase(level);
    const el = document.getElementById('phase-' + level);
    if (el) el.scrollIntoView({ behavior: 'smooth', block: 'start' });
}

function goToSynthesis() {
    showSection('methodes');
    const el = document.getElementById('methodes');
    if (el) el.scrollIntoView({ behavior: 'smooth', block: 'start' });
}

function showNextSection() {
    const sections = ['introduction', 'retention', 'phases', 'methodes', 'pieges'];
    const currentVisible = getCurrentVisibleSection();
    const currentIndex = sections.indexOf(currentVisible);
    if (currentIndex < sections.length - 1) {
        showSection(sections[currentIndex + 1]);
    }
}

function showPreviousSection() {
    const sections = ['introduction', 'retention', 'phases', 'methodes', 'pieges'];
    const currentVisible = getCurrentVisibleSection();
    const currentIndex = sections.indexOf(currentVisible);
    if (currentIndex > 0) {
        showSection(sections[currentIndex - 1]);
    }
}

function getCurrentVisibleSection() {
    const sections = document.querySelectorAll('[data-section]');
    let visibleSection = 'introduction';
    
    sections.forEach(section => {
        const rect = section.getBoundingClientRect();
        if (rect.top <= 150 && rect.bottom > 150) {
            visibleSection = section.getAttribute('data-section');
        }
    });
    
    return visibleSection;
}
</script>

</body>
</html>