<!DOCTYPE html>
<html lang='fr'>
<head>
    <meta charset='UTF-8'>
    <meta name='viewport' content='width=device-width,initial-scale=1'>
    <title>ğŸ“‹ Fiche SynthÃ¨se â€“ Nombres relatifs</title>
    
    
    <script>
        let quizScore = 0;
        let answeredQuestions = new Set();
        
        function normalizeAnswer(answer) {
            return answer.trim().replace(/\s+/g, '').toLowerCase();
        }
        
        function checkAnswer(questionNum, correctAnswer, explanation) {
            const input = document.getElementById(`answer${questionNum}`);
            const feedback = document.getElementById(`feedback${questionNum}`);
            const userAnswer = input.value.trim();
            
            if (!userAnswer) {
                feedback.className = 'feedback-zone feedback-neutral';
                feedback.innerHTML = 'ğŸ“ <strong>Astuce :</strong> Ã‰cris ta rÃ©ponse dans la case (exemple: +3, -5, 0)';
                return;
            }
            
            // Normaliser les rÃ©ponses pour la comparaison
            const normalizedUser = normalizeAnswer(userAnswer);
            const normalizedCorrect = normalizeAnswer(correctAnswer);
            
            // VÃ©rifier diffÃ©rentes variantes de rÃ©ponse
            let isCorrect = false;
            if (normalizedUser === normalizedCorrect || 
                normalizedUser === normalizedCorrect.replace('+', '') ||
                (correctAnswer === '+12' && (normalizedUser === '12' || normalizedUser === 'douze')) ||
                (correctAnswer === '0' && (normalizedUser === 'zÃ©ro' || normalizedUser === 'zero' || normalizedUser === '0000'))) {
                isCorrect = true;
            }
            
            if (isCorrect) {
                feedback.className = 'feedback-zone feedback-success';
                feedback.innerHTML = `âœ“ <strong>Excellent !</strong> RÃ©ponse correcte : ${correctAnswer}<br><em>ğŸ’¡ ${explanation}</em>`;
                
                if (!answeredQuestions.has(questionNum)) {
                    quizScore++;
                    answeredQuestions.add(questionNum);
                    updateScore();
                }
                
                // DÃ©sactiver le bouton
                input.disabled = true;
                input.style.background = '#1a4d3a';
                const btn = input.nextElementSibling;
                btn.disabled = true;
                btn.textContent = 'âœ“ ValidÃ©';
            } else {
                feedback.className = 'feedback-zone feedback-error';
                
                // Analyse plus fine du type d'erreur
                let errorMsg = '';
                let diagnostic = '';
                
                if (questionNum <= 3) {
                    // Analyser le type d'erreur pour les calculs
                    const userNum = parseInt(userAnswer.replace(/[^-\d]/g, ''));
                    const correctNum = parseInt(correctAnswer.replace(/[^-\d]/g, ''));
                    
                    if (isNaN(userNum)) {
                        errorMsg = 'Assure-toi d\\u0027Ã©crire un nombre entier (exemple: +3, -5)';
                        diagnostic = 'Format de rÃ©ponse';
                    } else if (Math.abs(userNum) === Math.abs(correctNum) && userNum !== correctNum) {
                        errorMsg = 'Le calcul est bon, mais vÃ©rifie le signe final !';
                        diagnostic = 'Erreur de signe';
                    } else if (Math.abs(userNum) !== Math.abs(correctNum)) {
                        errorMsg = 'VÃ©rifie ton calcul arithmÃ©tique, puis les rÃ¨gles de signes.';
                        diagnostic = 'Erreur de calcul';
                    } else {
                        errorMsg = 'VÃ©rifie les signes ! Sont-ils identiques ou diffÃ©rents ?';
                        diagnostic = 'MÃ©thode Ã  revoir';
                    }
                } else if (questionNum === 4) {
                    errorMsg = 'L\\u0027opposÃ© d\\u0027un nombre change juste son signe.';
                    diagnostic = 'Concept d\\u0027opposÃ©';
                } else {
                    errorMsg = 'Attention au piÃ¨ge ! Que se passe-t-il quand on additionne des nombres opposÃ©s ?';
                    diagnostic = 'Nombres opposÃ©s';
                }
                
                feedback.innerHTML = `âœ— <strong>Pas tout Ã  fait...</strong><br>ğŸ” <em>${diagnostic}:</em> ${errorMsg}<br><strong>Aide :</strong> ${explanation}`;
                
                // Effet visuel d'erreur
                input.style.borderColor = '#ff6b6b';
                setTimeout(() => {
                    input.style.borderColor = '#3f4956';
                }, 2000);
            }
        }
        
        function updateScore() {
            const scoreElement = document.getElementById('quizScore');
            const progressBar = document.getElementById('progressBar');
            
            scoreElement.textContent = `Score : ${quizScore}/5`;
            
            const percentage = (quizScore / 5) * 100;
            progressBar.style.width = percentage + '%';
            
            // Message d'encouragement
            if (quizScore === 5) {
                scoreElement.innerHTML += ' ğŸ‰ <span style="color:#10ac84">PARFAIT !</span>';
            } else if (quizScore >= 3) {
                scoreElement.innerHTML += ' ğŸ˜Š <span style="color:#67c7ff">Bon travail !</span>';
            }
        }
        

        
        // Variables pour le quiz de complÃ©tion
        let completionScore = 0;
        let completionAnswered = new Set();
        
        function checkCompletion(questionNum, correctAnswers) {
            const selectA = document.getElementById(`comp${questionNum}a`);
            const selectB = document.getElementById(`comp${questionNum}b`);
            const feedback = document.getElementById(`compFeedback${questionNum}`);
            const btn = event.target;
            
            const answerA = selectA.value;
            const answerB = selectB.value;
            
            if (!answerA || !answerB) {
                feedback.className = 'completion-feedback feedback-neutral';
                feedback.innerHTML = 'ğŸ“ <em>ComplÃ¨te les deux parties avant de valider !</em>';
                return;
            }
            
            const isCorrect = (answerA === correctAnswers[0] && answerB === correctAnswers[1]);
            
            if (isCorrect) {
                feedback.className = 'completion-feedback feedback-success';
                feedback.innerHTML = `âœ“ <strong>Parfait !</strong> Tu maÃ®trises cette rÃ¨gle !`;
                
                if (!completionAnswered.has(questionNum)) {
                    completionScore++;
                    completionAnswered.add(questionNum);
                    updateCompletionScore();
                }
                
                // DÃ©sactiver les Ã©lÃ©ments
                selectA.disabled = true;
                selectB.disabled = true;
                btn.disabled = true;
                btn.textContent = 'âœ“ ValidÃ©';
                
            } else {
                feedback.className = 'completion-feedback feedback-error';
                
                let hint = '';
                if (questionNum === 1) {
                    hint = 'Pense : que fais-tu quand les signes sont pareils ?';
                } else if (questionNum === 2) {
                    hint = 'Rappel : avec des signes diffÃ©rents, on fait une soustraction !';
                } else {
                    hint = 'Quels exemples concrets utilise-t-on pour les nombres relatifs ?';
                }
                
                feedback.innerHTML = `âœ— <strong>Pas encore...</strong><br>ğŸ’¡ <em>${hint}</em>`;
            }
        }
        
        function updateCompletionScore() {
            const scoreElement = document.getElementById('completionScore');
            scoreElement.textContent = `Score phrases : ${completionScore}/3`;
            
            if (completionScore === 3) {
                scoreElement.innerHTML += ' ğŸ‰ <span style="color:#10ac84">RÃ¨gles maÃ®trisÃ©es !</span>';
            }
        }
        
        // Permettre validation avec EntrÃ©e
        document.addEventListener('DOMContentLoaded', function() {
            for (let i = 1; i <= 5; i++) {
                const input = document.getElementById(`answer${i}`);
                if (input) {
                    input.addEventListener('keypress', function(e) {
                        if (e.key === 'Enter') {
                            const btn = this.nextElementSibling;
                            btn.click();
                        }
                    });
                }
            }
        });
    </script>
</head>
<body>

<header>
    <h1>ğŸ“‹ Fiche SynthÃ¨se â€“ Nombres relatifs</h1>
    <nav>
        <a href='../cours/cours_principal.html'>ğŸ”™ Retour au cours</a>
        <button onclick='location.reload()' class='refresh-btn'>ğŸ”„ Tout recommencer</button>
    </nav>
</header>

<section>
    <h2>ğŸ“– RÃ¨gles Essentielles</h2>
    
    <div class='regle-box regle-positive'>
        <h3><span class='icone-regle'>â•</span>RÃˆGLE 1 : MÃªme signe</h3>
        <p><strong>Additionner les valeurs et garder le signe commun</strong></p>
        <div class='exemple-box'>
            <strong>Exemples :</strong><br>
            â€¢ (-3) + (-5) = -8 <em>(3 + 5 = 8, signe -)</em><br>
            â€¢ (+6) + (+4) = +10 <em>(6 + 4 = 10, signe +)</em>
        </div>
    </div>
    
    <div class='regle-box regle-negative'>
        <h3><span class='icone-regle'>â–</span>RÃˆGLE 2 : Signes diffÃ©rents</h3>
        <p><strong>Soustraire la plus petite de la plus grande, garder le signe du Â« plus fort Â»</strong></p>
        <div class='exemple-box'>
            <strong>Exemples :</strong><br>
            â€¢ (-7) + (+4) = -3 <em>(7 - 4 = 3, signe de -7)</em><br>
            â€¢ (+9) + (-2) = +7 <em>(9 - 2 = 7, signe de +9)</em>
        </div>
    </div>
    
    <div class='regle-box regle-neutre'>
        <h3><span class='icone-regle'>ğŸ”</span>RÃˆGLE 3 : ContrÃ´le</h3>
        <p><strong>VÃ©rifier avec un contexte concret</strong></p>
        <div class='exemple-box'>
            <strong>Astuces :</strong><br>
            â€¢ TempÃ©rature : -5Â°C + 8Â°C = +3Â°C âœ“<br>
            â€¢ Argent : -20â‚¬ + 15â‚¬ = -5â‚¬ (dÃ©couvert) âœ“
        </div>
    </div>
</section>

<section>
    <h2>ğŸ¨ SchÃ©ma Visuel</h2>
    <div class='card'>
        <h3>ğŸ“ Droite graduÃ©e des dÃ©placements</h3>
        <div class='droite-graduee'>
            <div class='ligne-droite'>NÃ©gatifs â†â”€â”€â”€â”€â”€â”€â”€ 0 â”€â”€â”€â”€â”€â”€â”€â†’ Positifs</div>
            <div class='nombres-negatifs'>-8   -6   -4   -2   <span class='nombre-zero'>0</span>   <span class='nombres-positifs'>+2   +4   +6   +8</span></div>
            <div class='legende-droite'>
                ğŸŸ¥ Rouge = NÃ©gatif  â€¢  ğŸŸ¨ Jaune = ZÃ©ro  â€¢  ğŸŸ¦ Bleu = Positif
            </div>
        </div>
        <div class='exemple-box exemple-deplacements'>
            <strong>Exemples de dÃ©placements :</strong><br>
            â€¢ Â« +3 Â» = avancer de 3 vers la droite â†’<br>
            â€¢ Â« -5 Â» = reculer de 5 vers la gauche â†
        </div>
    </div>
</section>

<section>
    <h2>âš ï¸ Attention aux PiÃ¨ges !</h2>
    <div class='grid-auto'>
        <div class='piege-box'>
            <h4>ğŸš« PiÃ¨ge 1 : Confusion des rÃ¨gles</h4>
            <p><strong>Erreur :</strong> (-4) + (-3) = -1 <em>(faire 4-3)</em></p>
            <p><strong>âœ“ Correct :</strong> MÃªme signe â†’ 4+3 = 7 â†’ <strong>-7</strong></p>
        </div>
        <div class='piege-box'>
            <h4>ğŸš« PiÃ¨ge 2 : Mauvais signe final</h4>
            <p><strong>Erreur :</strong> (+2) + (-8) = +6 <em>(garder le +)</em></p>
            <p><strong>âœ“ Correct :</strong> Le Â« plus fort Â» est -8 â†’ <strong>-6</strong></p>
        </div>
    </div>
</section>

<section>
    <h2>ğŸ® Mini Quiz Interactif</h2>
    <div class='quiz-enrichi'>
        <!-- Barre de progression -->
        <div class='quiz-progress'>
            <div class='quiz-progress-bar' id='progressBar'></div>
        </div>
        <div class='quiz-score' id='quizScore'>Score : 0/5</div>
        
        <!-- Question 1 -->
        <div class='quiz-item' id='q1'>
            <p><strong>ğŸ¯ Niveau Facile :</strong> (+7) + (-4) = ?</p>
            <div class='quiz-input'>
                <input type='text' class='quiz-textbox' id='answer1' placeholder='Ta rÃ©ponse' maxlength='4'>
                <button class='quiz-btn' onclick='checkAnswer(1, "+3", "Signes diffÃ©rents : 7 - 4 = 3, signe de +7 (le plus fort) â†’ +3")'>âœ“ Valider</button>
            </div>
            <div class='feedback-zone' id='feedback1'></div>
        </div>
        
        <!-- Question 2 -->
        <div class='quiz-item' id='q2'>
            <p><strong>ğŸ¯ Niveau Moyen :</strong> (-9) + (+3) = ?</p>
            <div class='quiz-input'>
                <input type='text' class='quiz-textbox' id='answer2' placeholder='Ta rÃ©ponse' maxlength='4'>
                <button class='quiz-btn' onclick='checkAnswer(2, "-6", "Signes diffÃ©rents : 9 - 3 = 6, signe de -9 (le plus fort) â†’ -6")'>âœ“ Valider</button>
            </div>
            <div class='feedback-zone' id='feedback2'></div>
        </div>
        
        <!-- Question 3 -->
        <div class='quiz-item' id='q3'>
            <p><strong>ğŸ¯ Niveau Difficile :</strong> (-5) + (-6) = ?</p>
            <div class='quiz-input'>
                <input type='text' class='quiz-textbox' id='answer3' placeholder='Ta rÃ©ponse' maxlength='4'>
                <button class='quiz-btn' onclick='checkAnswer(3, "-11", "MÃªme signe nÃ©gatif : 5 + 6 = 11, on garde le signe - â†’ -11")'>âœ“ Valider</button>
            </div>
            <div class='feedback-zone' id='feedback3'></div>
        </div>
        
        <!-- Question 4 -->
        <div class='quiz-item' id='q4'>
            <p><strong>ğŸ§© DÃ©fi :</strong> Donner l'opposÃ© de -12</p>
            <div class='quiz-input'>
                <input type='text' class='quiz-textbox' id='answer4' placeholder='Ta rÃ©ponse' maxlength='4'>
                <button class='quiz-btn' onclick='checkAnswer(4, "+12", "L\u0027opposÃ© change le signe : l\u0027opposÃ© de -12 est +12")'>âœ“ Valider</button>
            </div>
            <div class='feedback-zone' id='feedback4'></div>
        </div>
        
        <!-- Question 5 -->
        <div class='quiz-item' id='q5'>
            <p><strong>ğŸ” PiÃ¨ge :</strong> (-8) + (+8) = ?</p>
            <div class='quiz-input'>
                <input type='text' class='quiz-textbox' id='answer5' placeholder='Ta rÃ©ponse' maxlength='4'>
                <button class='quiz-btn' onclick='checkAnswer(5, "0", "Nombres opposÃ©s : (-8) et (+8) s\u0027annulent, somme = 0")'>âœ“ Valider</button>
            </div>
            <div class='feedback-zone' id='feedback5'></div>
        </div>
    </div>
</section>

<section>
    <h2>ğŸ§  Fiche MÃ©mo Ã  complÃ©ter</h2>
    <div class='card'>
        <h3>âœï¸ ComplÃ¨te les phrases (sans regarder !)</h3>
        
        <!-- Question 1 -->
        <div class='completion-item'>
            <p><strong>1.</strong> Quand les signes sont <strong>identiques</strong>, je 
                <select class='completion-select' id='comp1a' title='PremiÃ¨re action avec signes identiques'>
                    <option value=''>-- Choisir --</option>
                    <option value='additionne'>additionne</option>
                    <option value='soustrais'>soustrais</option>
                    <option value='multiplie'>multiplie</option>
                    <option value='divise'>divise</option>
                </select>
                les valeurs et je 
                <select class='completion-select' id='comp1b' title='Action sur le signe avec signes identiques'>
                    <option value=''>-- Choisir --</option>
                    <option value='garde'>garde</option>
                    <option value='change'>change</option>
                    <option value='inverse'>inverse</option>
                    <option value='supprime'>supprime</option>
                </select>
                le signe.
                <button class='completion-btn' onclick='checkCompletion(1, ["additionne", "garde"])'>âœ“ Valider</button>
            </p>
            <div class='completion-feedback' id='compFeedback1'></div>
        </div>

        <!-- Question 2 -->
        <div class='completion-item'>
            <p><strong>2.</strong> Quand les signes sont <strong>diffÃ©rents</strong>, je 
                <select class='completion-select' id='comp2a' title='Action avec signes diffÃ©rents'>
                    <option value=''>-- Choisir --</option>
                    <option value='additionne'>additionne</option>
                    <option value='soustrais'>soustrais</option>
                    <option value='multiplie'>multiplie</option>
                    <option value='ignore'>ignore</option>
                </select>
                et je garde le signe du 
                <select class='completion-select' id='comp2b' title='Quel signe garder avec signes diffÃ©rents'>
                    <option value=''>-- Choisir --</option>
                    <option value='plus fort'>plus fort</option>
                    <option value='plus faible'>plus faible</option>
                    <option value='premier'>premier</option>
                    <option value='dernier'>dernier</option>
                </select>.
                <button class='completion-btn' onclick='checkCompletion(2, ["soustrais", "plus fort"])'>âœ“ Valider</button>
            </p>
            <div class='completion-feedback' id='compFeedback2'></div>
        </div>

        <!-- Question 3 -->
        <div class='completion-item'>
            <p><strong>3.</strong> Pour vÃ©rifier, j'utilise un exemple avec la 
                <select class='completion-select' id='comp3a' title='Premier exemple concret'>
                    <option value=''>-- Choisir --</option>
                    <option value='tempÃ©rature'>tempÃ©rature</option>
                    <option value='distance'>distance</option>
                    <option value='vitesse'>vitesse</option>
                    <option value='masse'>masse</option>
                </select>
                ou l'
                <select class='completion-select' id='comp3b' title='Second exemple concret'>
                    <option value=''>-- Choisir --</option>
                    <option value='argent'>argent</option>
                    <option value='Ã©nergie'>Ã©nergie</option>
                    <option value='altitude'>altitude</option>
                    <option value='Ã¢ge'>Ã¢ge</option>
                </select>.
                <button class='completion-btn' onclick='checkCompletion(3, ["tempÃ©rature", "argent"])'>âœ“ Valider</button>
            </p>
            <div class='completion-feedback' id='compFeedback3'></div>
        </div>

        <!-- Score global pour les phrases -->
        <div class='completion-score' id='completionScore'>Score phrases : 0/3</div>
    </div>
</section>
<section>
    <h2>ğŸš€ Prochaines Ã©tapes</h2>
    <div class='card'>
        <div class='exemple-box'>
            <p>ğŸ“‹ <strong>Si tout est vert :</strong> Passe aux <a href='../exercices/exercices_niveau2_pratique.html'>exercices pratiques</a></p>
            <p>âš ï¸ <strong>Si des erreurs :</strong> Retourne au <a href='../cours/cours_principal.html'>cours principal</a> section concernÃ©e</p>
            <p>ğŸª <strong>Pour aller plus loin :</strong> Teste les <a href='../exercices/exercices_niveau3_defi.html'>dÃ©fis avancÃ©s</a></p>
        </div>
    </div>
</section>
<footer>
    <small>ğŸ“ˆ Fiche enrichie â€“ GÃ©nÃ©ration adaptative â€¢ RÃ©activation scientifique espacÃ©e</small>
</footer>
</body>
</html>