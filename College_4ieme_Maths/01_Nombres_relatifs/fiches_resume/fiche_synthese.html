<!DOCTYPE html>
<html lang='fr'>
<head>
    <meta charset='UTF-8'>
    <meta name='viewport' content='width=device-width,initial-scale=1'>
    <title>üìã Fiche Synth√®se ‚Äì Nombres relatifs</title>
    
    
    <script>
        let quizScore = 0;
        let answeredQuestions = new Set();
        
        function normalizeAnswer(answer) {
            return answer.trim().replace(/\s+/g, '').toLowerCase();
        }
        
        function checkAnswer(questionNum, correctAnswer, explanation) {
            const input = document.getElementById(`answer${questionNum}`);
            const feedback = document.getElementById(`feedback${questionNum}`);
            const userAnswer = input.value.trim();
            
            if (!userAnswer) {
                feedback.className = 'feedback-zone feedback-neutral';
                feedback.innerHTML = 'üìù <strong>Astuce :</strong> √âcris ta r√©ponse dans la case (exemple: +3, -5, 0)';
                return;
            }
            
            // Normaliser les r√©ponses pour la comparaison
            const normalizedUser = normalizeAnswer(userAnswer);
            const normalizedCorrect = normalizeAnswer(correctAnswer);
            
            // V√©rifier diff√©rentes variantes de r√©ponse
            let isCorrect = false;
            if (normalizedUser === normalizedCorrect || 
                normalizedUser === normalizedCorrect.replace('+', '') ||
                (correctAnswer === '+12' && (normalizedUser === '12' || normalizedUser === 'douze')) ||
                (correctAnswer === '0' && (normalizedUser === 'z√©ro' || normalizedUser === 'zero' || normalizedUser === '0000'))) {
                isCorrect = true;
            }
            
            if (isCorrect) {
                feedback.className = 'feedback-zone feedback-success';
                feedback.innerHTML = `‚úì <strong>Excellent !</strong> R√©ponse correcte : ${correctAnswer}<br><em>üí° ${explanation}</em>`;
                
                if (!answeredQuestions.has(questionNum)) {
                    quizScore++;
                    answeredQuestions.add(questionNum);
                    updateScore();
                }
                
                // D√©sactiver le bouton
                input.disabled = true;
                input.style.background = '#1a4d3a';
                const btn = input.nextElementSibling;
                btn.disabled = true;
                btn.textContent = '‚úì Valid√©';
            } else {
                feedback.className = 'feedback-zone feedback-error';
                
                // Analyse plus fine du type d'erreur
                let errorMsg = '';
                let diagnostic = '';
                
                if (questionNum <= 3) {
                    // Analyser le type d'erreur pour les calculs
                    const userNum = parseInt(userAnswer.replace(/[^-\d]/g, ''));
                    const correctNum = parseInt(correctAnswer.replace(/[^-\d]/g, ''));
                    
                    if (isNaN(userNum)) {
                        errorMsg = 'Assure-toi d\\u0027√©crire un nombre entier (exemple: +3, -5)';
                        diagnostic = 'Format de r√©ponse';
                    } else if (Math.abs(userNum) === Math.abs(correctNum) && userNum !== correctNum) {
                        errorMsg = 'Le calcul est bon, mais v√©rifie le signe final !';
                        diagnostic = 'Erreur de signe';
                    } else if (Math.abs(userNum) !== Math.abs(correctNum)) {
                        errorMsg = 'V√©rifie ton calcul arithm√©tique, puis les r√®gles de signes.';
                        diagnostic = 'Erreur de calcul';
                    } else {
                        errorMsg = 'V√©rifie les signes ! Sont-ils identiques ou diff√©rents ?';
                        diagnostic = 'M√©thode √† revoir';
                    }
                } else if (questionNum === 4) {
                    errorMsg = 'L\\u0027oppos√© d\\u0027un nombre change juste son signe.';
                    diagnostic = 'Concept d\\u0027oppos√©';
                } else {
                    errorMsg = 'Attention au pi√®ge ! Que se passe-t-il quand on additionne des nombres oppos√©s ?';
                    diagnostic = 'Nombres oppos√©s';
                }
                
                feedback.innerHTML = `‚úó <strong>Pas tout √† fait...</strong><br>üîç <em>${diagnostic}:</em> ${errorMsg}<br><strong>Aide :</strong> ${explanation}`;
                
                // Effet visuel d'erreur
                input.style.borderColor = '#ff6b6b';
                setTimeout(() => {
                    input.style.borderColor = '#3f4956';
                }, 2000);
            }
        }
        
        function updateScore() {
            const scoreElement = document.getElementById('quizScore');
            const progressBar = document.getElementById('progressBar');
            
            scoreElement.textContent = `Score : ${quizScore}/5`;
            
            const percentage = (quizScore / 5) * 100;
            progressBar.style.width = percentage + '%';
            
            // Message d'encouragement
            if (quizScore === 5) {
                scoreElement.innerHTML += ' üéâ <span style="color:#10ac84">PARFAIT !</span>';
            } else if (quizScore >= 3) {
                scoreElement.innerHTML += ' üòä <span style="color:#67c7ff">Bon travail !</span>';
            }
        }
        

        
        // Variables pour le quiz de compl√©tion
        let completionScore = 0;
        let completionAnswered = new Set();
        
        function checkCompletion(questionNum, correctAnswers) {
            const selectA = document.getElementById(`comp${questionNum}a`);
            const selectB = document.getElementById(`comp${questionNum}b`);
            const feedback = document.getElementById(`compFeedback${questionNum}`);
            const btn = event.target;
            
            const answerA = selectA.value;
            const answerB = selectB.value;
            
            if (!answerA || !answerB) {
                feedback.className = 'completion-feedback feedback-neutral';
                feedback.innerHTML = 'üìù <em>Compl√®te les deux parties avant de valider !</em>';
                return;
            }
            
            const isCorrect = (answerA === correctAnswers[0] && answerB === correctAnswers[1]);
            
            if (isCorrect) {
                feedback.className = 'completion-feedback feedback-success';
                feedback.innerHTML = `‚úì <strong>Parfait !</strong> Tu ma√Ætrises cette r√®gle !`;
                
                if (!completionAnswered.has(questionNum)) {
                    completionScore++;
                    completionAnswered.add(questionNum);
                    updateCompletionScore();
                }
                
                // D√©sactiver les √©l√©ments
                selectA.disabled = true;
                selectB.disabled = true;
                btn.disabled = true;
                btn.textContent = '‚úì Valid√©';
                
            } else {
                feedback.className = 'completion-feedback feedback-error';
                
                let hint = '';
                if (questionNum === 1) {
                    hint = 'Pense : que fais-tu quand les signes sont pareils ?';
                } else if (questionNum === 2) {
                    hint = 'Rappel : avec des signes diff√©rents, on fait une soustraction !';
                } else {
                    hint = 'Quels exemples concrets utilise-t-on pour les nombres relatifs ?';
                }
                
                feedback.innerHTML = `‚úó <strong>Pas encore...</strong><br>üí° <em>${hint}</em>`;
            }
        }
        
        function updateCompletionScore() {
            const scoreElement = document.getElementById('completionScore');
            scoreElement.textContent = `Score phrases : ${completionScore}/3`;
            
            if (completionScore === 3) {
                scoreElement.innerHTML += ' üéâ <span style="color:#10ac84">R√®gles ma√Ætris√©es !</span>';
            }
        }
        
        // Permettre validation avec Entr√©e
        document.addEventListener('DOMContentLoaded', function() {
            for (let i = 1; i <= 5; i++) {
                const input = document.getElementById(`answer${i}`);
                if (input) {
                    input.addEventListener('keypress', function(e) {
                        if (e.key === 'Enter') {
                            const btn = this.nextElementSibling;
                            btn.click();
                        }
                    });
                }
            }
        });
    </script>
</head>
<body>

<header>
    <h1>üìã Fiche Synth√®se ‚Äì Nombres relatifs</h1>
    <nav>
        <a href='../cours/cours_principal.html'>üîô Retour au cours</a>
        <button onclick='location.reload()' class='refresh-btn'>üîÑ Tout recommencer</button>
    </nav>
</header>

<section>
    <h2>üìñ R√®gles Essentielles</h2>
    
    <div class='regle-box regle-positive'>
        <h3><span class='icone-regle'>‚ûï</span>R√àGLE 1 : M√™me signe</h3>
        <p><strong>Additionner les valeurs et garder le signe commun</strong></p>
        <div class='exemple-box'>
            <strong>Exemples :</strong><br>
            ‚Ä¢ (-3) + (-5) = -8 <em>(3 + 5 = 8, signe -)</em><br>
            ‚Ä¢ (+6) + (+4) = +10 <em>(6 + 4 = 10, signe +)</em>
        </div>
    </div>
    
    <div class='regle-box regle-negative'>
        <h3><span class='icone-regle'>‚ûñ</span>R√àGLE 2 : Signes diff√©rents</h3>
        <p><strong>Soustraire la plus petite de la plus grande, garder le signe du ¬´ plus fort ¬ª</strong></p>
        <div class='exemple-box'>
            <strong>Exemples :</strong><br>
            ‚Ä¢ (-7) + (+4) = -3 <em>(7 - 4 = 3, signe de -7)</em><br>
            ‚Ä¢ (+9) + (-2) = +7 <em>(9 - 2 = 7, signe de +9)</em>
        </div>
    </div>
    
    <div class='regle-box regle-neutre'>
        <h3><span class='icone-regle'>üîç</span>R√àGLE 3 : Contr√¥le</h3>
        <p><strong>V√©rifier avec un contexte concret</strong></p>
        <div class='exemple-box'>
            <strong>Astuces :</strong><br>
            ‚Ä¢ Temp√©rature : -5¬∞C + 8¬∞C = +3¬∞C ‚úì<br>
            ‚Ä¢ Argent : -20‚Ç¨ + 15‚Ç¨ = -5‚Ç¨ (d√©couvert) ‚úì
        </div>
    </div>
</section>

<section>
    <h2>üé® Sch√©ma Visuel</h2>
    <div class='card'>
        <h3>üìè Droite gradu√©e des d√©placements</h3>
        <div class='droite-graduee'>
            <div class='ligne-droite'>N√©gatifs ‚Üê‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ 0 ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚Üí Positifs</div>
            <div class='nombres-negatifs'>-8   -6   -4   -2   <span class='nombre-zero'>0</span>   <span class='nombres-positifs'>+2   +4   +6   +8</span></div>
            <div class='legende-droite'>
                üü• Rouge = N√©gatif  ‚Ä¢  üü® Jaune = Z√©ro  ‚Ä¢  üü¶ Bleu = Positif
            </div>
        </div>
        <div class='exemple-box exemple-deplacements'>
            <strong>Exemples de d√©placements :</strong><br>
            ‚Ä¢ ¬´ +3 ¬ª = avancer de 3 vers la droite ‚Üí<br>
            ‚Ä¢ ¬´ -5 ¬ª = reculer de 5 vers la gauche ‚Üê
        </div>
    </div>
</section>

<section>
    <h2>‚ö†Ô∏è Attention aux Pi√®ges !</h2>
    <div class='grid-auto'>
        <div class='piege-box'>
            <h4>üö´ Pi√®ge 1 : Confusion des r√®gles</h4>
            <p><strong>Erreur :</strong> (-4) + (-3) = -1 <em>(faire 4-3)</em></p>
            <p><strong>‚úì Correct :</strong> M√™me signe ‚Üí 4+3 = 7 ‚Üí <strong>-7</strong></p>
        </div>
        <div class='piege-box'>
            <h4>üö´ Pi√®ge 2 : Mauvais signe final</h4>
            <p><strong>Erreur :</strong> (+2) + (-8) = +6 <em>(garder le +)</em></p>
            <p><strong>‚úì Correct :</strong> Le ¬´ plus fort ¬ª est -8 ‚Üí <strong>-6</strong></p>
        </div>
    </div>
</section>

<section>
    <h2>üéÆ Mini Quiz Interactif</h2>
    <div class='quiz-enrichi'>
        <!-- Barre de progression -->
        <div class='quiz-progress'>
            <div class='quiz-progress-bar' id='progressBar'></div>
        </div>
        <div class='quiz-score' id='quizScore'>Score : 0/5</div>
        
        <!-- Question 1 -->
        <div class='quiz-item' id='q1'>
            <p><strong>üéØ Niveau Facile :</strong> (+7) + (-4) = ?</p>
            <div class='quiz-input'>
                <input type='text' class='quiz-textbox' id='answer1' placeholder='Ta r√©ponse' maxlength='4'>
                <button class='quiz-btn' onclick='checkAnswer(1, "+3", "Signes diff√©rents : 7 - 4 = 3, signe de +7 (le plus fort) ‚Üí +3")'>‚úì Valider</button>
            </div>
            <div class='feedback-zone' id='feedback1'></div>
        </div>
        
        <!-- Question 2 -->
        <div class='quiz-item' id='q2'>
            <p><strong>üéØ Niveau Moyen :</strong> (-9) + (+3) = ?</p>
            <div class='quiz-input'>
                <input type='text' class='quiz-textbox' id='answer2' placeholder='Ta r√©ponse' maxlength='4'>
                <button class='quiz-btn' onclick='checkAnswer(2, "-6", "Signes diff√©rents : 9 - 3 = 6, signe de -9 (le plus fort) ‚Üí -6")'>‚úì Valider</button>
            </div>
            <div class='feedback-zone' id='feedback2'></div>
        </div>
        
        <!-- Question 3 -->
        <div class='quiz-item' id='q3'>
            <p><strong>üéØ Niveau Difficile :</strong> (-5) + (-6) = ?</p>
            <div class='quiz-input'>
                <input type='text' class='quiz-textbox' id='answer3' placeholder='Ta r√©ponse' maxlength='4'>
                <button class='quiz-btn' onclick='checkAnswer(3, "-11", "M√™me signe n√©gatif : 5 + 6 = 11, on garde le signe - ‚Üí -11")'>‚úì Valider</button>
            </div>
            <div class='feedback-zone' id='feedback3'></div>
        </div>
        
        <!-- Question 4 -->
        <div class='quiz-item' id='q4'>
            <p><strong>üß© D√©fi :</strong> Donner l'oppos√© de -12</p>
            <div class='quiz-input'>
                <input type='text' class='quiz-textbox' id='answer4' placeholder='Ta r√©ponse' maxlength='4'>
                <button class='quiz-btn' onclick='checkAnswer(4, "+12", "L\u0027oppos√© change le signe : l\u0027oppos√© de -12 est +12")'>‚úì Valider</button>
            </div>
            <div class='feedback-zone' id='feedback4'></div>
        </div>
        
        <!-- Question 5 -->
        <div class='quiz-item' id='q5'>
            <p><strong>üîç Pi√®ge :</strong> (-8) + (+8) = ?</p>
            <div class='quiz-input'>
                <input type='text' class='quiz-textbox' id='answer5' placeholder='Ta r√©ponse' maxlength='4'>
                <button class='quiz-btn' onclick='checkAnswer(5, "0", "Nombres oppos√©s : (-8) et (+8) s\u0027annulent, somme = 0")'>‚úì Valider</button>
            </div>
            <div class='feedback-zone' id='feedback5'></div>
        </div>
    </div>
</section>

<section>
    <h2>üß† Fiche M√©mo √† compl√©ter</h2>
    <div class='card'>
        <h3>‚úçÔ∏è Compl√®te les phrases (sans regarder !)</h3>
        
        <!-- Question 1 -->
        <div class='completion-item'>
            <p><strong>1.</strong> Quand les signes sont <strong>identiques</strong>, je 
                <select class='completion-select' id='comp1a' title='Premi√®re action avec signes identiques'>
                    <option value=''>-- Choisir --</option>
                    <option value='additionne'>additionne</option>
                    <option value='soustrais'>soustrais</option>
                    <option value='multiplie'>multiplie</option>
                    <option value='divise'>divise</option>
                </select>
                les valeurs et je 
                <select class='completion-select' id='comp1b' title='Action sur le signe avec signes identiques'>
                    <option value=''>-- Choisir --</option>
                    <option value='garde'>garde</option>
                    <option value='change'>change</option>
                    <option value='inverse'>inverse</option>
                    <option value='supprime'>supprime</option>
                </select>
                le signe.
                <button class='completion-btn' onclick='checkCompletion(1, ["additionne", "garde"])'>‚úì Valider</button>
            </p>
            <div class='completion-feedback' id='compFeedback1'></div>
        </div>

        <!-- Question 2 -->
        <div class='completion-item'>
            <p><strong>2.</strong> Quand les signes sont <strong>diff√©rents</strong>, je 
                <select class='completion-select' id='comp2a' title='Action avec signes diff√©rents'>
                    <option value=''>-- Choisir --</option>
                    <option value='additionne'>additionne</option>
                    <option value='soustrais'>soustrais</option>
                    <option value='multiplie'>multiplie</option>
                    <option value='ignore'>ignore</option>
                </select>
                et je garde le signe du 
                <select class='completion-select' id='comp2b' title='Quel signe garder avec signes diff√©rents'>
                    <option value=''>-- Choisir --</option>
                    <option value='plus fort'>plus fort</option>
                    <option value='plus faible'>plus faible</option>
                    <option value='premier'>premier</option>
                    <option value='dernier'>dernier</option>
                </select>.
                <button class='completion-btn' onclick='checkCompletion(2, ["soustrais", "plus fort"])'>‚úì Valider</button>
            </p>
            <div class='completion-feedback' id='compFeedback2'></div>
        </div>

        <!-- Question 3 -->
        <div class='completion-item'>
            <p><strong>3.</strong> Pour v√©rifier, j'utilise un exemple avec la 
                <select class='completion-select' id='comp3a' title='Premier exemple concret'>
                    <option value=''>-- Choisir --</option>
                    <option value='temp√©rature'>temp√©rature</option>
                    <option value='distance'>distance</option>
                    <option value='vitesse'>vitesse</option>
                    <option value='masse'>masse</option>
                </select>
                ou l'
                <select class='completion-select' id='comp3b' title='Second exemple concret'>
                    <option value=''>-- Choisir --</option>
                    <option value='argent'>argent</option>
                    <option value='√©nergie'>√©nergie</option>
                    <option value='altitude'>altitude</option>
                    <option value='√¢ge'>√¢ge</option>
                </select>.
                <button class='completion-btn' onclick='checkCompletion(3, ["temp√©rature", "argent"])'>‚úì Valider</button>
            </p>
            <div class='completion-feedback' id='compFeedback3'></div>
        </div>

        <!-- Score global pour les phrases -->
        <div class='completion-score' id='completionScore'>Score phrases : 0/3</div>
    </div>
</section>
<section>
    <h2>üöÄ Prochaines √©tapes</h2>
    <div class='card'>
        <div class='exemple-box'>
            <p>üìã <strong>Si tout est vert :</strong> Passe aux <a href='../exercices/exercices_niveau2_pratique.html'>exercices pratiques</a></p>
            <p>‚ö†Ô∏è <strong>Si des erreurs :</strong> Retourne au <a href='../cours/cours_principal.html'>cours principal</a> section concern√©e</p>
            <p>üé™ <strong>Pour aller plus loin :</strong> Teste les <a href='../exercices/exercices_niveau3_defi.html'>d√©fis avanc√©s</a></p>
        </div>
    </div>
</section>
<footer>
    <small>üìà Fiche enrichie ‚Äì G√©n√©ration adaptative ‚Ä¢ R√©activation scientifique espac√©e</small>
</footer>
</body>
</html>