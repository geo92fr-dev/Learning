<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Cours</title>
<style>
  :root {
    --bg: #ffffff;
    --fg: #222;
    --accent: #2b6cb0;
    --accent-soft: #e6f0fa;
    --warn: #d97706;
    --ok: #047857;
    --font-main: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen;
    --font-dys: 'OpenDyslexic', var(--font-main);
  }
  body { font-family: var(--font-main); margin:0; line-height:1.5; background:var(--bg); color:var(--fg); }
  header { padding:0.75rem 1rem; background: var(--accent); color:#fff; display:flex; flex-wrap:wrap; gap:0.5rem; align-items:center; }
  header h1 { font-size:1.15rem; margin:0; flex:1; }
  button, .toggle { cursor:pointer; }
  .toolbar button { background:#fff; border:none; padding:0.45rem 0.7rem; border-radius:6px; font-size:0.8rem; }
  .toolbar button:active { transform:scale(.96); }
  main { padding:1rem; max-width:850px; margin:0 auto; }
  .block { border:1px solid #ddd; border-radius:10px; padding:0.85rem 0.9rem 0.9rem; margin-bottom:0.9rem; background:#fff; box-shadow:0 2px 4px rgba(0,0,0,.04); }
  .block h2, .block h3 { margin-top:0; }
  .tag { display:inline-block; font-size:0.65rem; text-transform:uppercase; letter-spacing:0.05em; background:var(--accent-soft); padding:0.25rem 0.45rem; border-radius:4px; color:var(--accent); margin-right:0.4rem; }
  .steps li { margin-bottom:0.4rem; }
  details { margin:0.5rem 0; }
  summary { cursor:pointer; font-weight:600; }
  .pill { display:inline-block; background:#edf2f7; color:#222; padding:0.15rem 0.55rem; border-radius:999px; font-size:0.65rem; margin:0 0.25rem 0.25rem 0; }
  .levels { display:flex; flex-wrap:wrap; gap:0.5rem; }
  .lvl { flex:1 1 160px; border:1px solid #d9e2ec; border-radius:8px; padding:0.6rem 0.65rem; background:#f8fafc; }
  .lvl h4 { margin:0 0 0.4rem; font-size:0.85rem; }
  .warn { background:#fef3c7; border-left:4px solid var(--warn); padding:0.5rem 0.7rem; border-radius:6px; font-size:0.85rem; }
  .success { background:#ecfdf5; border-left:4px solid var(--ok); padding:0.5rem 0.7rem; border-radius:6px; font-size:0.85rem; }
  .checklist label { display:flex; align-items:center; gap:0.5rem; margin-bottom:0.35rem; font-size:0.85rem; }
  .checklist input { transform:scale(1.2); }
  footer { padding:1.2rem; text-align:center; font-size:0.7rem; color:#555; }
  .hidden { display:none !important; }
  .audio-btn { font-size:0.75rem; background:var(--accent); color:#fff; border:none; padding:0.35rem 0.6rem; border-radius:4px; margin-left:0.4rem; }
  .pause-hint { font-size:0.7rem; color:#666; font-style:italic; margin-top:0.4rem; }

  /* Dark mode */
  .dark { --bg:#1f2937; --fg:#f1f5f9; --accent:#60a5fa; --accent-soft:#1e3a56; }
  .dark body { background:var(--bg); color:var(--fg); }
  .dark .block { background:#273549; border-color:#334155; }
  .dark .lvl { background:#1e293b; border-color:#334155; }
  .dark .pill { background:#334155; color:#e2e8f0; }
  .dark .warn { background:#78350f; color:#fff; }
  .dark .success { background:#064e3b; color:#d1fae5; }

  /* Dys mode */
  .dys { font-family: var(--font-dys); letter-spacing:0.03em; }
  .big { font-size:1.15em; }

  @media (max-width:600px){
    header { flex-direction:column; align-items:stretch; }
    .toolbar { display:flex; flex-wrap:wrap; gap:0.4rem; }
  }
</style>
</head>
<body>
  <header>
    <h1 id="courseTitle">Cours</h1>
    <div class="toolbar">
      <button id="modeBtn">Mode sombre</button>
      <button id="dysBtn">Police Dys</button>
      <button id="fontBtn">+ Taille</button>
      <button id="ttsBtn">Lecture section</button>
      <button id="focusBtn">Mode focus</button>
    </div>
  </header>
  <main id="content">
    <!-- Le contenu généré sera injecté ici -->
  </main>
  <footer>Généré - Version accessible prototype</footer>
<script>
// Accessibilité & Préférences
const st = { dark:false, dys:false, big:false, focus:false };
const body = document.body;
const modeBtn = document.getElementById('modeBtn');
const dysBtn = document.getElementById('dysBtn');
const fontBtn = document.getElementById('fontBtn');
const ttsBtn = document.getElementById('ttsBtn');
const focusBtn = document.getElementById('focusBtn');

modeBtn.onclick = ()=>{ st.dark=!st.dark; body.classList.toggle('dark', st.dark); modeBtn.textContent = st.dark? 'Mode clair':'Mode sombre'; };
dysBtn.onclick = ()=>{ st.dys=!st.dys; body.classList.toggle('dys', st.dys); };
fontBtn.onclick = ()=>{ st.big=!st.big; body.classList.toggle('big', st.big); };
focusBtn.onclick = ()=>{ st.focus=!st.focus; document.querySelectorAll('.block').forEach(b=>{ if(st.focus){ b.addEventListener('click',onlyThis); b.style.cursor='pointer'; } else { b.classList.remove('dim'); b.style.cursor='default'; b.removeEventListener('click',onlyThis);} }); };
function onlyThis(e){ document.querySelectorAll('.block').forEach(b=> b.classList.toggle('dim', b!==e.currentTarget)); }

// Lecture vocale
let speaking = false;
ttsBtn.onclick = ()=>{
  if(!('speechSynthesis' in window)) { alert('Synthèse vocale non supportée.'); return; }
  const sel = window.getSelection().toString().trim();
  const target = sel || prompt('Lecture : sélectionne du texte ou colle quelque chose ici');
  if(!target) return;
  if(speaking){ window.speechSynthesis.cancel(); speaking=false; ttsBtn.textContent='Lecture section'; return; }
  const u = new SpeechSynthesisUtterance(target); u.lang='fr-FR'; u.rate=0.95; u.pitch=1; speaking=true; ttsBtn.textContent='Arrêter';
  u.onend=()=>{ speaking=false; ttsBtn.textContent='Lecture section'; };
  speechSynthesis.speak(u);
};

// Exemple de contenu injecté (sera remplacé par génération Python)
</script>
</body>
</html>